<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog & News</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body class="blog-page">

<header>
  <div class="wrap">
    <h1>Latest News & Updates</h1>
    <div class="toolbar">
      <div class="toolbar-left">
        <input id="search" type="text" placeholder="Search apps…" aria-label="Search" />
        <button class="btn secondary" id="returnBtn" style="display:none;">⟲ Return</button>
      </div>
      <div class="toolbar-right">
        <button class="btn" id="addBtn">+ Add App</button>
        <input id="importFile" type="file" accept="application/json" style="display:none" />
        <button class="btn secondary" id="exportBtn">Export</button>
        <span class="tag" id="countTag">0 apps</span>
      </div>
    </div>
  </div>
</header>

<!-- Sidebar placeholder -->
<div id="sidebarContainer"></div>

<main>
  <section class="page-header">
    <h1 class="page-title">Blogs & Posts for my app</h1>
  </section>

  <!-- Blog posts -->
  <section class="blog-container">
    <article class="blog-post">
      <h2 class="post-title">Welcome to Our New Blog!</h2>
      <p class="post-date">September 4, 2025</p>
      <p class="post-content">
        We’re excited to launch our blog section 🎉 Here we’ll share updates, new features, and tips.
        Stay tuned for more content coming soon!
      </p>
      <a href="#" class="read-more">Read More →</a>
    </article>

    <article class="blog-post">
      <h2 class="post-title">Theme Toggle Feature</h2>
      <p class="post-date">August 30, 2025</p>
      <p class="post-content">
        You can now switch between Light 🌞 and Dark 🌙 themes. Your preference is saved automatically
        for your next visit.
      </p>
      <a href="#" class="read-more">Read More →</a>
    </article>
  </section>

  <section class="forecast-section">
    <h1 class="page-title">Forecast Section</h1>
   <div id="weatherWidget" class="card">
  <!-- Today -->
  <div class="today-forecast">
    <div class="today-temp">--°C</div>
    <div class="today-icon">❔</div>
    <div class="today-details">
      <p class="today-date">Loading...</p>
      <p class="today-description">---</p>
      <p class="today-minmax">Min --°C / Max --°C</p>
    </div>
  </div>

  <!-- Upcoming days -->
  <div class="upcoming-forecast">
    <!-- Forecast days will be added here by JS -->
  </div>
</div>


<!-- Load sidebar dynamically -->
<script>
fetch('sidebar.html')
  .then(response => response.text())
  .then(html => {
    document.getElementById('sidebarContainer').innerHTML = html;

    // Sidebar functionality
    const menuBtn = document.getElementById("menuBtn");
    const sidebarExpand = document.getElementById("sidebarExpand");
    const header = document.querySelector("header");
    const mainContent = document.querySelector("main");
    const footer = document.querySelector(".footer");

    if (menuBtn) {
      menuBtn.addEventListener("click", () => {
        sidebarExpand.classList.toggle("active");
        header.classList.toggle("shifted");
        mainContent.classList.toggle("shifted");
        if (footer) footer.classList.toggle("shifted");
      });
    }

    // Theme toggle
    const themeToggle = document.getElementById("themeToggle");
    if (themeToggle) {
      let currentTheme = localStorage.getItem("theme") || "light";
      document.body.classList.add(currentTheme);
      themeToggle.textContent = currentTheme === "dark" ? "🌙" : "☀️";

      themeToggle.addEventListener("click", () => {
        themeToggle.classList.add("animate");
        setTimeout(() => {
          themeToggle.classList.remove("animate");
          document.body.classList.remove(currentTheme);
          currentTheme = currentTheme === "dark" ? "light" : "dark";
          document.body.classList.add(currentTheme);
          localStorage.setItem("theme", currentTheme);
          themeToggle.textContent = currentTheme === "dark" ? "🌙" : "☀️";
        }, 400);
      });
    }

    // Favorites button placeholder
    const favoritesBtn = document.getElementById("favoritesBtn");
    if (favoritesBtn) {
      favoritesBtn.addEventListener("click", () => {
        alert("Favorites are only available on the main page.");
      });
    }
  });
</script>

<script>
// Forecast widget on second page
function fetchForecast(lat, lon) {
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=temperature_2m_max,temperature_2m_min&timezone=auto`;

  fetch(url)
    .then(res => res.json())
    .then(data => {
      const days = data.daily.time.slice(0, 5); // 5-day forecast
      const max = data.daily.temperature_2m_max.slice(0, 5);
      const min = data.daily.temperature_2m_min.slice(0, 5);

      const forecastHTML = days.map((day, i) => {
        return `
          <div class="forecast-day">
            <p><strong>${new Date(day).toLocaleDateString(undefined, { weekday: 'short' })}</strong></p>
            <p>🌡️ ${min[i]}°C / ${max[i]}°C</p>
          </div>
        `;
      }).join("");

      document.getElementById("weather").innerHTML = forecastHTML;
    })
    .catch(() => {
      document.getElementById("weather").textContent = "Unable to load forecast.";
    });
}

// Get location and fetch forecast
if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(
    pos => fetchForecast(pos.coords.latitude, pos.coords.longitude),
    () => { document.getElementById("weather").textContent = "Location access denied."; }
  );
} else {
  document.getElementById("weather").textContent = "Geolocation not supported.";
}
</script>

<script src="script.js"></script>
</body>
</html>

